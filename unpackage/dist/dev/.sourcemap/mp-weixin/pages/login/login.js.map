{"version":3,"sources":["uni-app:///main.js","webpack:///D:/huolalaFiles/selfProject/study-uniapp1/uniapp-社区交友/pages/login/login.vue?e4ec","webpack:///D:/huolalaFiles/selfProject/study-uniapp1/uniapp-社区交友/pages/login/login.vue?945f","webpack:///D:/huolalaFiles/selfProject/study-uniapp1/uniapp-社区交友/pages/login/login.vue?899f","webpack:///D:/huolalaFiles/selfProject/study-uniapp1/uniapp-社区交友/pages/login/login.vue?327f","uni-app:///pages/login/login.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,6F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACgO;AAChO,gBAAgB,sOAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAs4B,CAAgB,44BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoE15B;AACA;AACA,8BADA;AAEA,0BAFA,EADA;;AAKA,MALA,kBAKA;AACA;AACA,mBADA;AAEA,kBAFA;AAGA,kBAHA;AAIA,eAJA;AAKA,cALA;AAMA,iBANA;AAOA,oBAPA;;AASA,GAfA;AAgBA,QAhBA,oBAgBA;;AAEA,GAlBA;AAmBA;AACA,YADA,sBACA;AACA;AACA;AACA;AACA;AACA,KANA,EAnBA;;AA2BA;AACA,QADA,kBACA;AACA;AACA,gBADA;;AAGA,KALA;AAMA;AACA,YAPA,sBAOA;AACA;AACA;AACA;AACA;AACA,KAZA;AAaA;AACA,gBAdA,0BAcA;AACA;AACA;AACA;AACA,KAlBA;AAmBA;AACA,WApBA,qBAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA;AACA,oBADA,EAFA;AAIA,UAJA,CAIA;AACA;AACA,6BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,SAPA,EAOA,IAPA;AAQA,OAnBA;AAoBA,KAhDA;AAiDA;AACA,YAlDA,sBAkDA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA,KA9DA;AA+DA;AACA,UAhEA,oBAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,yBAFA;;AAIA,OARA,MAQA;AACA;AACA;AACA;AACA,iCADA;AAEA,iCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;;AAGA;AACA,uBADA;AAEA,sBAFA;;AAIA,OAfA,EAeA,KAfA,CAeA;AACA;AACA;AACA,OAlBA;;AAoBA,KA1GA,EA3BA,E","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.1.2.20210206\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\r\n\t\t<!-- #ifndef MP -->\r\n\t\t<uni-status-bar></uni-status-bar>\r\n\t\t<view>\r\n\t\t\t<view class=\"iconfont icon-guanbi flex align-center justify-center font-lg\"\r\n\t\t\tstyle=\"width: 100rpx;height: 100rpx;\" hover-class=\"bg-light\" \r\n\t\t\t@click=\"back\"></view>\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t\r\n\t\t<view class=\"text-center\" style=\"padding-top: 130rpx;padding-bottom: 70rpx;font-size: 55rpx;\">{{status ? '手机验证码登录':'账号密码登录'}}</view>\r\n\t\t\r\n\t\t<view class=\"px-2\">\r\n\t\t\t<template v-if=\"!status\">\r\n\t\t\t\t<view class=\"mb-2\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"username\" placeholder=\"昵称/手机号/邮箱\" class=\"border-bottom p-2\"/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"mb-2 flex align-stretch\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"password\" placeholder=\"请输入密码\" class=\"border-bottom p-2 flex-1\"/>\r\n\t\t\t\t\t<view class=\"border-bottom flex align-center justify-center font text-muted\" style=\"width: 150rpx;\">忘记密码？</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t\t<template v-else>\r\n\t\t\t\t<view class=\"mb-2 flex align-stretch\">\r\n\t\t\t\t\t<view class=\"border-bottom flex align-center justify-center font px-2\">+86</view>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"phone\" placeholder=\"手机号\" class=\"border-bottom p-2 flex-1\"/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"mb-2 flex align-stretch\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"code\" placeholder=\"请输入验证码\" class=\"border-bottom p-2 flex-1\"/>\r\n\t\t\t\t\t<view class=\"border-bottom flex align-center justify-center font-sm text-white\" :class=\"codeTime > 0 ? 'bg-main-disabled' : 'bg-main'\" style=\"width: 180rpx;\" @click=\"getCode\">{{codeTime > 0 ? codeTime + ' s' : '获取验证码'}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t\t\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"py-2 px-3\">\r\n\t\t\t<button class=\"text-white\" style=\"border-radius: 50rpx;border: 0;\" type=\"primary\" :disabled=\"disabled\" :class=\"disabled ? 'bg-main-disabled':'bg-main'\" @click=\"submit\" :loading=\"loading\">{{loading ? '登录中...' : '登录'}}</button>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"flex align-center justify-center pt-2 pb-4\">\r\n\t\t\t<view class=\"text-primary font-sm\" @click=\"changeStatus\">\r\n\t\t\t\t{{status?'账号密码登录':'验证码登陆'}}\r\n\t\t\t</view>\r\n\t\t\t<text class=\"text-muted mx-2\">|</text>\r\n\t\t\t<view class=\"text-primary font-sm\">登录遇到问题</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"flex align-center justify-center\">\r\n\t\t\t<view style=\"height: 1rpx;background-color: #dddddd;width: 100rpx;\"></view>\r\n\t\t\t<view class=\"mx-2 text-muted\">社交账号登录</view>\r\n\t\t\t<view style=\"height: 1rpx;background-color: #dddddd;width: 100rpx;\"></view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<other-login back></other-login>\r\n\t\t\r\n\t\t<view class=\"flex align-center justify-center text-muted\">\r\n\t\t\t注册即代表同意<text class=\"text-primary\">《xxx社区协议》</text>\r\n\t\t</view>\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\timport uniStatusBar from '@/components/uni-ui/uni-status-bar/uni-status-bar.vue';\r\n\timport otherLogin from '@/components/common/other-login.vue';\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniStatusBar,\r\n\t\t\totherLogin\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tstatus:false,\r\n\t\t\t\tusername:\"\",\r\n\t\t\t\tpassword:\"\",\r\n\t\t\t\tphone:\"\",\r\n\t\t\t\tcode:\"\",\r\n\t\t\t\tcodeTime:0,\r\n\t\t\t\tloading:false\n\t\t\t}\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tdisabled() {\r\n\t\t\t\tif ((this.username === '' || this.password === '') && (this.phone === '' || this.code === '')) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\n\t\t\tback(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 初始化表单\r\n\t\t\tinitForm(){\r\n\t\t\t\tthis.username = ''\r\n\t\t\t\tthis.password = ''\r\n\t\t\t\tthis.phone = ''\r\n\t\t\t\tthis.code = ''\r\n\t\t\t},\r\n\t\t\t// 切换登录方式\r\n\t\t\tchangeStatus(){\r\n\t\t\t\t// 初始化表单\r\n\t\t\t\tthis.initForm()\r\n\t\t\t\tthis.status = !this.status\r\n\t\t\t},\r\n\t\t\t// 获取验证码\r\n\t\t\tgetCode(){\r\n\t\t\t\t// 防止重复获取\r\n\t\t\t\tif (this.codeTime > 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 验证手机号\r\n\t\t\t\tif (!this.validate()) return;\r\n\t\t\t\t// 请求数据\r\n\t\t\t\tthis.$H.post('/user/sendcode',{\r\n\t\t\t\t\tphone:this.phone\r\n\t\t\t\t},{\r\n\t\t\t\t\tnative:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 倒计时\r\n\t\t\t\t\tthis.codeTime = 60\r\n\t\t\t\t\tlet timer = setInterval(()=>{\r\n\t\t\t\t\t\tif (this.codeTime >= 1) {\r\n\t\t\t\t\t\t\tthis.codeTime--\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.codeTime = 0\r\n\t\t\t\t\t\t\tclearInterval(timer)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1000)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 表单验证\r\n\t\t\tvalidate(){\r\n\t\t\t\t//手机号正则\r\n\t\t\t\tvar mPattern = /^1[34578]\\d{9}$/; \r\n\t\t\t\tif (!mPattern.test(this.phone)) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '手机号格式不正确',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t// ...更多验证\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\t// 提交\r\n\t\t\tsubmit(){\r\n\t\t\t\t// 表单验证\r\n\t\t\t\tlet url = \"\"\r\n\t\t\t\tlet data = \"\"\r\n\t\t\t\tif(this.status){\r\n\t\t\t\t\t// 手机验证码登录\r\n\t\t\t\t\tif (!this.validate()) return;\r\n\t\t\t\t\turl = '/user/phonelogin'\r\n\t\t\t\t\tdata = {\r\n\t\t\t\t\t\tphone:this.phone,\r\n\t\t\t\t\t\tcode:this.code\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 账号密码登录\r\n\t\t\t\t\turl = '/user/login'\r\n\t\t\t\t\tdata = {\r\n\t\t\t\t\t\tusername:this.username,\r\n\t\t\t\t\t\tpassword:this.password\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 提交后端\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.$H.post(url,data).then(res=>{\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t// 修改vuex的state,持久化存储\r\n\t\t\t\t\tthis.$store.commit('login',res)\r\n\t\t\t\t\t// 开启socket\r\n\t\t\t\t\tthis.$store.dispatch('openSocket')\r\n\t\t\t\t\t// 提示和跳转\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t}); \r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '登录成功',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t// 登录失败\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}